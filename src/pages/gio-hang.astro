---
import Layout from "../layouts/Layout.astro";
import { GioHangPanel } from "../components/Cart/GioHangPanel";
import HeaderTopBar from "../components/Header/HeaderTopBar";
import HeaderMain from "../components/Header/Header";
const title = `MTSMART - Cửa hàng điện thoại, laptop giá rẻ , chính hãng`;
---

<Layout>
  <Fragment slot="head">
    <title>{title}</title>
  </Fragment>
  <HeaderTopBar client:load />
  <HeaderMain client:load />
  <main
    class="w-full py-4 max-w-screen-xl mx-auto lg:px-2 px-2 2xl:px-0 relative"
  >
    <div
      id="initial-spinner-overlay"
      class="fixed inset-0 z-[100] flex items-center justify-center bg-transparent transition-opacity duration-300"
    >
      <div class="flex flex-col items-center">
        <div
          class="h-12 w-12 animate-spin rounded-full border-4 border-red-600 border-t-transparent"
        >
        </div>
        <p class="mt-4 text-gray-700">Đang tải đợi xíu.</p>
      </div>
    </div>
    <div
      id="gio-hang-content"
      class="opacity-0 transition-opacity duration-500"
    >
      <GioHangPanel client:load />
    </div>
  </main>
</Layout>

<script>
  (() => {
    const spinner = document.getElementById("initial-spinner-overlay");
    const content = document.getElementById("gio-hang-content");

    if (!spinner || !content) return;

    const HIDE_DELAY = 500;
    const FADE_DURATION = 300;

    setTimeout(() => {
      content.style.opacity = "1";

      spinner.style.opacity = "0";

      setTimeout(() => {
        spinner.remove();
      }, FADE_DURATION);
    }, HIDE_DELAY);
  })();
</script>
